@keep_asm

@__asm_bss__ {
    ts_sec resq 1
}

// returns the current time as an integer
@trust_ret
def timei() :: int {
    @__asm__ {
        mov rax, 228          ; syscall: clock_gettime
        mov rdi, 0            ; CLOCK_REALTIME = 0
        lea rsi, [ts_sec]
        syscall
    }
}
